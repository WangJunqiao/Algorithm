最大权闭合图：

定义：一个有向图的闭合图G=(V,E)是该有向图的一个点集，且该点集的所有出边都还指向该点集。
即闭合图内的任意点的任意后继也一定在闭合图中。

给每个点v分配一个点权（任意实数，可正可负）。最大权闭合图，是一个点权之和最大的闭合图。

闭合图的性质恰好反映了事件之间的必要条件的关系：一个事件发生，它需要的所有前提都要发生。

下面通过构图，我们将最大权闭合图问题转化成最小割问题，即最大流问题求解。

定义W[I]代表顶点I的权值，新增源点S，汇点T。

1、若W[I]>0，则S向I连一条容量为W[I]的边。
2、若W[I]<0，则I向T连一条容量为-W[I]的边。
3、原图中的边，容量设置为正无穷。

这样，最小割就对应了最大权闭合图，而总盈利-最大流就是权和。